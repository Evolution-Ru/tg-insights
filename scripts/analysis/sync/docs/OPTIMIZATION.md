# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –∑–∞—Ç—Ä–∞—Ç

–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ Telegram ‚Üî Asana —á–µ—Ä–µ–∑ –±–∞—Ç—á–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤.

## –ë–∞—Ç—á–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ OpenAI

### –≠–º–±–µ–¥–¥–∏–Ω–≥–∏ –¥–ª—è Telegram –∑–∞–¥–∞—á

**–ë—ã–ª–æ:** –ü–æ–ª—É—á–µ–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∞ –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏ –æ—Ç–¥–µ–ª—å–Ω–æ –≤ —Ü–∏–∫–ª–µ
```python
for tg_task in telegram_tasks:
    tg_embedding = get_embedding(tg_text)  # –û—Ç–¥–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏
```

**–°—Ç–∞–ª–æ:** –ë–∞—Ç—á–∏–Ω–≥ –≤—Å–µ—Ö Telegram –∑–∞–¥–∞—á –∑–∞—Ä–∞–Ω–µ–µ
```python
# –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ –±–∞—Ç—á–∞–º–∏ –≤ –Ω–∞—á–∞–ª–µ
telegram_embeddings = get_embeddings_batch(all_telegram_texts, batch_size=100)

# –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏
for tg_task in telegram_tasks:
    tg_embedding = telegram_embeddings_map[tg_idx]
```

**–≠–∫–æ–Ω–æ–º–∏—è:** 
- –ë—ã–ª–æ: 21 –∑–∞–ø—Ä–æ—Å –¥–ª—è 21 –∑–∞–¥–∞—á–∏
- –°—Ç–∞–ª–æ: 1 –±–∞—Ç—á (21 –∑–∞–¥–∞—á–∞ –≤ –æ–¥–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ)
- **–≠–∫–æ–Ω–æ–º–∏—è: ~95% –Ω–∞ –∑–∞–ø—Ä–æ—Å–∞—Ö –∫ API**

### –≠–º–±–µ–¥–¥–∏–Ω–≥–∏ –¥–ª—è Asana –∑–∞–¥–∞—á

**–ë—ã–ª–æ:** Fallback –ø–æ–ª—É—á–∞–ª —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ –ø–æ –æ–¥–Ω–æ–º—É
```python
for text in asana_texts:
    emb = get_embedding(text)  # –û—Ç–¥–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å
```

**–°—Ç–∞–ª–æ:** –ë–∞—Ç—á–∏–Ω–≥ –¥–∞–∂–µ –≤ fallback —Ä–µ–∂–∏–º–µ
```python
batch_size = 100
for i in range(0, len(asana_texts), batch_size):
    batch_texts = asana_texts[i:i+batch_size]
    response = client.embeddings.create(input=batch_texts)  # –ë–∞—Ç—á
```

**–≠–∫–æ–Ω–æ–º–∏—è:**
- –ë—ã–ª–æ: N –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è N –∑–∞–¥–∞—á
- –°—Ç–∞–ª–æ: N/100 –∑–∞–ø—Ä–æ—Å–æ–≤ (–±–∞—Ç—á–∞–º–∏ –ø–æ 100)
- **–≠–∫–æ–Ω–æ–º–∏—è: ~99% –Ω–∞ –∑–∞–ø—Ä–æ—Å–∞—Ö –∫ API**

### GPT-5 –ø—Ä–æ–≤–µ—Ä–∫–∏

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã –ø–æ –æ–¥–Ω–æ–º—É
```python
gpt5_score = self.calculate_similarity(tg_text, asana_text)
```

**–ü–æ—á–µ–º—É –Ω–µ –±–∞—Ç—á–∏–º:**
- GPT-5 –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç—Ä–µ–±—É—é—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–≤–µ—Ä–æ–∫ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ (—Ç–æ–ª—å–∫–æ —Ç–æ–ø-–∫–∞–Ω–¥–∏–¥–∞—Ç—ã)
- Batch API –¥–ª—è GPT-5 –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π (—Ç—Ä–µ–±—É–µ—Ç –æ–∂–∏–¥–∞–Ω–∏—è)

**–í–æ–∑–º–æ–∂–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (TODO):**
- –î–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ (>50 –ø—Ä–æ–≤–µ—Ä–æ–∫) –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å batch API
- –°–æ–±—Ä–∞—Ç—å –≤—Å–µ –ø—Ä–æ–º–ø—Ç—ã –≤ JSONL —Ñ–∞–π–ª
- –û—Ç–ø—Ä–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ `client.batches.create()`
- –î–æ–∂–¥–∞—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å

### –†–∞–∑–º–µ—Ä—ã –±–∞—Ç—á–µ–π

**–≠–º–±–µ–¥–¥–∏–Ω–≥–∏:**
- –†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞: 100 —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- –õ–∏–º–∏—Ç OpenAI: –¥–æ 2048 —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: 100 –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏

**GPT-5 (–µ—Å–ª–∏ –±—É–¥–µ—Ç –±–∞—Ç—á–∏–Ω–≥):**
- –†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞: –¥–æ 50 –∑–∞–ø—Ä–æ—Å–æ–≤
- –õ–∏–º–∏—Ç OpenAI: –¥–æ 50,000 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –±–∞—Ç—á–µ
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: 50 –¥–ª—è –±–∞–ª–∞–Ω—Å–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏

## –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤

### –ü—Ä–æ–±–ª–µ–º–∞

–ö–µ—à –∏–º–µ–µ—Ç —Å–º—ã—Å–ª —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω **–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏**. –ò–Ω–∞—á–µ –∫–∞–∂–¥—ã–π –∑–∞–ø—É—Å–∫ —Å–æ–∑–¥–∞–µ—Ç –∫–µ—à –∑–∞–Ω–æ–≤–æ –∏ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤.

### –†–µ—à–µ–Ω–∏–µ

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–µ—à–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

–ö–µ—à –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ —Ñ–∞–π–ª–∞ `cache/embeddings/embeddings_cache.json` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ `EmbeddingCache`:

```python
cache = EmbeddingCache()
# –ö–µ—à –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ —Ñ–∞–π–ª–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
```

#### –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–µ–π

–ö–∞–∂–¥–∞—è –∑–∞–ø–∏—Å—å –∫–µ—à–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç:
- `embedding` - —Å–∞–º —ç–º–±–µ–¥–¥–∏–Ω–≥
- `model` - –º–æ–¥–µ–ª—å, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–π —Å–æ–∑–¥–∞–Ω —ç–º–±–µ–¥–¥–∏–Ω–≥
- `text` - –ø—Ä–µ–≤—å—é —Ç–µ–∫—Å—Ç–∞ (–ø–µ—Ä–≤—ã–µ 100 —Å–∏–º–≤–æ–ª–æ–≤)
- `created_at` - –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏ (timestamp)
- `last_used_at` - –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º hit)

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–ö–µ—à –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç:
- **hits** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø–∞–¥–∞–Ω–∏–π –≤ –∫–µ—à (–Ω–µ –Ω—É–∂–Ω–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å —É API)
- **misses** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–º–∞—Ö–æ–≤ (–Ω—É–∂–Ω–æ –∑–∞–ø—Ä–æ—Å–∏—Ç—å —É API)
- **saves** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –≤ –∫–µ—à
- **hit_rate** - –ø—Ä–æ—Ü–µ–Ω—Ç –ø–æ–ø–∞–¥–∞–Ω–∏–π (hits / (hits + misses) * 100)

#### –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –∑–∞–º–µ–¥–ª—è–µ—Ç —Ä–∞–±–æ—Ç—É

**–†–µ—à–µ–Ω–∏–µ:**
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ (–∫–∞–∂–¥—ã–µ 10 –∑–∞–ø–∏—Å–µ–π –¥–ª—è –µ–¥–∏–Ω–∏—á–Ω—ã—Ö, –∫–∞–∂–¥—ã–µ 50 –¥–ª—è –±–∞—Ç—á–µ–π)
- –§–ª–∞–≥ `cache_modified` –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º —á–µ—Ä–µ–∑ `flush_cache()`

#### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è `.json.backup` –Ω–∞ —Å–ª—É—á–∞–π –æ—à–∏–±–æ–∫.

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

#### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
from scripts.analysis.sync.core.asana_sync import AsanaSync

# –ö–µ—à –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
sync = AsanaSync(use_embedding_cache=True)

# –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ - –∫–µ—à –ø—É—Å—Ç–æ–π, –≤—Å–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è —É API
matching1 = sync.find_matching_tasks_v2(telegram_tasks, asana_tasks)

# –ü—Ä–∏ –≤—Ç–æ—Ä–æ–º –∑–∞–ø—É—Å–∫–µ - –∫–µ—à –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –º–µ–Ω—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API
matching2 = sync.find_matching_tasks_v2(telegram_tasks, asana_tasks)
```

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```python
# –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
cache_stats = sync.embedding_cache.get_cache_stats()
print(f"Hit rate: {cache_stats['hit_rate_percent']}%")
print(f"Cache size: {cache_stats['local_cache_size']} entries")

# –ò–ª–∏ –≤—ã–≤–µ—Å—Ç–∏ –ø–æ–ª–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
sync.embedding_cache.print_cache_stats()
```

–í—ã–≤–æ–¥:
```
üíæ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–µ—à–∞ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤:
   –†–∞–∑–º–µ—Ä –∫–µ—à–∞: 150 –∑–∞–ø–∏—Å–µ–π
   –ü–æ–ø–∞–¥–∞–Ω–∏–π (hits): 120
   –ü—Ä–æ–º–∞—Ö–æ–≤ (misses): 30
   –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π: 30
   Hit rate: 80.0%
   –°—Ä–µ–¥–Ω–∏–π –≤–æ–∑—Ä–∞—Å—Ç –∑–∞–ø–∏—Å–µ–π: 5.2 –¥–Ω–µ–π
```

### –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ (–∫–µ—à –ø—É—Å—Ç–æ–π)

```
üî¢ –ü–æ–ª—É—á–µ–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –¥–ª—è 21 Telegram –∑–∞–¥–∞—á (–±–∞—Ç—á–∞–º–∏)...
   üíæ –ö–µ—à —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤: 0 –∑–∞–ø–∏—Å–µ–π
   ‚úÖ –ü–æ–ª—É—á–µ–Ω–æ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤: 21/21
   
üíæ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–µ—à–∞ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤:
   –†–∞–∑–º–µ—Ä –∫–µ—à–∞: 21 –∑–∞–ø–∏—Å–µ–π
   –ü–æ–ø–∞–¥–∞–Ω–∏–π (hits): 0
   –ü—Ä–æ–º–∞—Ö–æ–≤ (misses): 21
   –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π: 21
   Hit rate: 0.0%
```

#### –í—Ç–æ—Ä–æ–π –∑–∞–ø—É—Å–∫ (–∫–µ—à –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

```
üî¢ –ü–æ–ª—É—á–µ–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –¥–ª—è 21 Telegram –∑–∞–¥–∞—á (–±–∞—Ç—á–∞–º–∏)...
   üíæ –ö–µ—à —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤: 21 –∑–∞–ø–∏—Å–µ–π
   ‚úÖ –ü–æ–ª—É—á–µ–Ω–æ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤: 21/21
   
üíæ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–µ—à–∞ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤:
   –†–∞–∑–º–µ—Ä –∫–µ—à–∞: 21 –∑–∞–ø–∏—Å–µ–π
   –ü–æ–ø–∞–¥–∞–Ω–∏–π (hits): 21
   –ü—Ä–æ–º–∞—Ö–æ–≤ (misses): 0
   –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π: 0
   Hit rate: 100.0%
```

**–≠–∫–æ–Ω–æ–º–∏—è:** 100% –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API –ø—Ä–æ–ø—É—â–µ–Ω–æ –±–ª–∞–≥–æ–¥–∞—Ä—è –∫–µ—à—É!

### –û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞

#### –û—á–∏—Å—Ç–∏—Ç—å –≤–µ—Å—å –∫–µ—à

```python
sync.embedding_cache.clear_cache()
```

#### –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏

```python
# –£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å–∏ —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π
sync.embedding_cache.clear_cache(older_than_days=30)
```

### –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ –∫–µ—à–∞

```json
{
  "abc123...": {
    "text": "–ó–∞–≤–µ—Ä—à–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—é 842 —Ç–æ–≤–∞—Ä–æ–≤...",
    "model": "text-embedding-3-small",
    "embedding": [0.1, 0.2, ...],
    "created_at": 1700000000.0,
    "last_used_at": 1700001000.0
  },
  "def456...": {
    ...
  }
}
```

### –ú–∏–≥—Ä–∞—Ü–∏—è —Å–æ —Å—Ç–∞—Ä–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞

–ö–µ—à –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ (–±–µ–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö) –≤ –Ω–æ–≤—ã–π –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ.

### OpenAI –∫–µ—à

OpenAI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–µ—à–∏—Ä—É–µ—Ç —ç–º–±–µ–¥–¥–∏–Ω–≥–∏:
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤
- –≠–∫–æ–Ω–æ–º–∏—è ~50% –Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```python
# –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä cache_control –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
response = client.embeddings.create(
    model="text-embedding-3-small",
    input=texts,
    cache_control={"type": "ephemeral"}  # –∏–ª–∏ "persistent"
)
```

## –û—Ü–µ–Ω–∫–∞ –∑–∞—Ç—Ä–∞—Ç

### –ü—Ä–∏–º–µ—Ä: 21 Telegram √ó 100 Asana

#### –ë–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**–≠–º–±–µ–¥–¥–∏–Ω–≥–∏:**
- Telegram –∑–∞–¥–∞—á–∏: 21 –∑–∞–ø—Ä–æ—Å
- Asana –∑–∞–¥–∞—á–∏: 100 –∑–∞–ø—Ä–æ—Å–æ–≤
- **–ò—Ç–æ–≥–æ: 121 –∑–∞–ø—Ä–æ—Å**
- –°—Ç–æ–∏–º–æ—Å—Ç—å: ~$0.002

**GPT-5:**
- –ü—Ä–æ–≤–µ—Ä–∫–∏: ~20 –ø—Ä–æ–≤–µ—Ä–æ–∫ √ó 21 –∑–∞–¥–∞—á–∞ = ~420 –ø—Ä–æ–≤–µ—Ä–æ–∫
- –°—Ç–æ–∏–º–æ—Å—Ç—å: ~$20-50

**–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: ~$20-50**

#### –° –±–∞—Ç—á–∏–Ω–≥–æ–º

**–≠–º–±–µ–¥–¥–∏–Ω–≥–∏:**
- Telegram –∑–∞–¥–∞—á–∏: 1 –±–∞—Ç—á (21 –∑–∞–¥–∞—á–∞) = 1 –∑–∞–ø—Ä–æ—Å
- Asana –∑–∞–¥–∞—á–∏: 1 –±–∞—Ç—á (100 –∑–∞–¥–∞—á) = 1 –∑–∞–ø—Ä–æ—Å
- **–ò—Ç–æ–≥–æ: 2 –∑–∞–ø—Ä–æ—Å–∞** (–±—ã–ª–æ: 121 –∑–∞–ø—Ä–æ—Å)
- **–≠–∫–æ–Ω–æ–º–∏—è: ~98% –Ω–∞ –∑–∞–ø—Ä–æ—Å–∞—Ö**
- –°—Ç–æ–∏–º–æ—Å—Ç—å: ~$0.002

**GPT-5:**
- –ü—Ä–æ–≤–µ—Ä–∫–∏: ~3-5 –ø—Ä–æ–≤–µ—Ä–æ–∫ √ó 21 –∑–∞–¥–∞—á–∞ = ~63-105 –ø—Ä–æ–≤–µ—Ä–æ–∫
- –°—Ç–æ–∏–º–æ—Å—Ç—å: ~$5-10

**–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: ~$5-10**
**–≠–∫–æ–Ω–æ–º–∏—è: ~75%**

#### –° –±–∞—Ç—á–∏–Ω–≥–æ–º + –∫–µ—à–µ–º (–ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞)

**–≠–º–±–µ–¥–¥–∏–Ω–≥–∏:**
- –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫: 2 –∑–∞–ø—Ä–æ—Å–∞ (—Å–æ–∑–¥–∞–µ—Ç –∫–µ—à)
- –í—Ç–æ—Ä–æ–π –∑–∞–ø—É—Å–∫: 0 –∑–∞–ø—Ä–æ—Å–æ–≤ (100% hit rate)
- **–≠–∫–æ–Ω–æ–º–∏—è: 100% –Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—É—Å–∫–∞—Ö**

**GPT-5:**
- –ü—Ä–æ–≤–µ—Ä–∫–∏: ~3-5 –ø—Ä–æ–≤–µ—Ä–æ–∫ √ó 21 –∑–∞–¥–∞—á–∞ = ~63-105 –ø—Ä–æ–≤–µ—Ä–æ–∫
- –°—Ç–æ–∏–º–æ—Å—Ç—å: ~$5-10

**–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: ~$5-10 (–ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫), ~$5-10 (–ø–æ–≤—Ç–æ—Ä–Ω—ã–µ)**

#### –ß–∞—Å—Ç–∏—á–Ω–æ–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–µ—à–∞

–ï—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å 5 –∑–∞–¥–∞—á –∏–∑ 21:
- Hit rate: 76% (16/21)
- –ó–∞–ø—Ä–æ—Å–æ–≤ –∫ API: 5 –≤–º–µ—Å—Ç–æ 21
- **–≠–∫–æ–Ω–æ–º–∏—è: 76%**

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –õ–æ–≥–∏

–ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–Ω–æ–º `verbose=True` –≤—ã —É–≤–∏–¥–∏—Ç–µ:
```
üî¢ –ü–æ–ª—É—á–µ–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –¥–ª—è 21 Telegram –∑–∞–¥–∞—á (–±–∞—Ç—á–∞–º–∏)...
   üì¶ –ë–∞—Ç—á 1/1...
   üíæ –ö–µ—à —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤: 21 –∑–∞–ø–∏—Å–µ–π
   ‚úÖ –ü–æ–ª—É—á–µ–Ω–æ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤: 21/21 (–∏–∑ –∫–µ—à–∞: 21)
```

### –ú–µ—Ç—Ä–∏–∫–∏

```python
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–µ—à–∞
cache_stats = sync.embedding_cache.get_cache_stats()
print(f"Hit rate: {cache_stats['hit_rate_percent']}%")
print(f"Cache size: {cache_stats['local_cache_size']} entries")

# –ü–æ–¥—Å—á–µ—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API
# (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–¥ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è)
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–∞—Ç—á–∏–Ω–≥** –¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
2. **–†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ 100** - –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
3. **–í–∫–ª—é—á–∞–π—Ç–µ –∫–µ—à —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Å–Ω–∏–∂–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
4. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ hit rate** - –µ—Å–ª–∏ –Ω–∏–∑–∫–∏–π (<50%), –≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ–±–ª–µ–º—ã —Å –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–µ–π —Ç–µ–∫—Å—Ç–∞
5. **–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞–π—Ç–µ —Å—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏** - —á—Ç–æ–±—ã –∫–µ—à –Ω–µ —Ä–∞–∑—Ä–∞—Å—Ç–∞–ª—Å—è
6. **–ù–µ —É–¥–∞–ª—è–π—Ç–µ –∫–µ—à –≤—Ä—É—á–Ω—É—é** - –æ–Ω –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏
7. **GPT-5 –ø—Ä–æ–≤–µ—Ä–∫–∏** –æ—Å—Ç–∞–≤–ª—è–µ–º —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ –¥–ª—è –º–∞–ª—ã—Ö –æ–±—ä–µ–º–æ–≤ (<50 –ø—Ä–æ–≤–µ—Ä–æ–∫)

## –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```python
sync = AsanaSync(
    use_time_windows=True,
    use_embedding_cache=True  # –ö–µ—à + –±–∞—Ç—á–∏–Ω–≥ = –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
)

matching = sync.find_matching_tasks_v2(
    telegram_tasks,
    asana_tasks,
    use_embeddings=True,  # –ë–∞—Ç—á–∏–Ω–≥ –≤–∫–ª—é—á–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
    verbose=True  # –í–∏–¥–µ—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ç—á–µ–π –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–µ—à–∞
)
```

